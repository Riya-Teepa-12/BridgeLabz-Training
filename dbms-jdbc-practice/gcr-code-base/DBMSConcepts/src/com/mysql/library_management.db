use mypractice_db;
Database changed
mysql> CREATE TABLE books (
    ->     book_id INT PRIMARY KEY AUTO_INCREMENT,
    ->     title VARCHAR(150),
    ->     author VARCHAR(100),
    ->     category VARCHAR(50),
    ->     total_copies INT,
    ->     available_copies INT
    -> );
Query OK, 0 rows affected (0.03 sec)

mysql> CREATE TABLE students (
    ->     student_id INT PRIMARY KEY AUTO_INCREMENT,
    ->     student_name VARCHAR(100),
    ->     course VARCHAR(50)
    -> );
Query OK, 0 rows affected (0.03 sec)

mysql> CREATE TABLE borrow_records (
    ->     borrow_id INT PRIMARY KEY AUTO_INCREMENT,
    ->     student_id INT,
    ->     book_id INT,
    ->     borrow_date DATE,
    ->     due_date DATE,
    ->     return_date DATE,
    ->
    ->     FOREIGN KEY (student_id) REFERENCES students(student_id),
    ->     FOREIGN KEY (book_id) REFERENCES books(book_id)
    -> );
Query OK, 0 rows affected (0.03 sec)

mysql> INSERT INTO books (title, author, category, total_copies, available_copies)
    -> VALUES
    -> ('Database Systems', 'Korth', 'DBMS', 5, 3),
    -> ('Operating Systems', 'Silberschatz', 'OS', 4, 2);
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql>
mysql> INSERT INTO students (student_name, course)
    -> VALUES
    -> ('Student A', 'BCA'),
    -> ('Student B', 'BSc');
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM books;
+---------+-------------------+--------------+----------+--------------+------------------+
| book_id | title             | author       | category | total_copies | available_copies |
+---------+-------------------+--------------+----------+--------------+------------------+
|       1 | Database Systems  | Korth        | DBMS     |            5 |                3 |
|       2 | Operating Systems | Silberschatz | OS       |            4 |                2 |
+---------+-------------------+--------------+----------+--------------+------------------+
2 rows in set (0.00 sec)

mysql> INSERT INTO borrow_records
    -> (student_id, book_id, borrow_date, due_date)
    -> VALUES
    -> (1, 1, CURDATE(), DATE_ADD(CURDATE(), INTERVAL 7 DAY));
Query OK, 1 row affected (0.01 sec)

mysql>
mysql> UPDATE books
    -> SET available_copies = available_copies - 1
    -> WHERE book_id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> SELECT
    ->     borrow_id,
    ->     student_id,
    ->     book_id,
    ->     GREATEST(DATEDIFF(CURDATE(), due_date), 0) * 10 AS fine_amount
    -> FROM borrow_records
    -> WHERE return_date IS NULL;
+-----------+------------+---------+-------------+
| borrow_id | student_id | book_id | fine_amount |
+-----------+------------+---------+-------------+
|         1 |          1 |       1 |           0 |
+-----------+------------+---------+-------------+
1 row in set (0.01 sec)

mysql> SELECT *
    -> FROM books
    -> WHERE
    ->     (title LIKE '%Database%' OR author LIKE '%Korth%')
    ->     AND category = 'DBMS'
    ->     AND available_copies > 0;
+---------+------------------+--------+----------+--------------+------------------+
| book_id | title            | author | category | total_copies | available_copies |
+---------+------------------+--------+----------+--------------+------------------+
|       1 | Database Systems | Korth  | DBMS     |            5 |                2 |
+---------+------------------+--------+----------+--------------+------------------+
1 row in set (0.01 sec)